(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(47)},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=n(7),l=n(12),s={currentDialog:[],roomsList:[],currentRoom:0,inventory:[],messages:[],gameRoutes:[],settings:{},loadGame:!1,userData:{Time:"00:00",Date:"1 \u044f\u043d\u0432\u0430\u0440\u044f 2019"}},u=n(1),m=function e(){Object(u.a)(this,e),this.getDialog=function(){return[{author:"char-1",replic:"\u041f\u0435\u0440\u0432\u0430\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430",hasAnswer:!1},{hasAnswer:!0,answerList:[{text:"\u041e\u0442\u0432\u0435\u0442, \u0432\u0435\u0434\u0443\u0449\u0438\u0439 \u043a 2 \u0440\u0435\u043f\u043b\u0438\u043a\u0435",goto:2,key:1},{text:"\u041e\u0442\u0432\u0435\u0442, \u0432\u0435\u0434\u0443\u0449\u0438\u0439 \u043a 3 \u0440\u0435\u043f\u043b\u0438\u043a\u0435",goto:3,key:2},{text:"\u041e\u0442\u0432\u0435\u0442, \u0432\u0435\u0434\u0443\u0449\u0438\u0439 \u043a 4 \u0440\u0435\u043f\u043b\u0438\u043a\u0435",goto:4,key:3}]},{author:"char-1",replic:"\u0412\u0442\u043e\u0440\u0430\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430",hasAnswer:!1},{author:"char-1",replic:"\u0422\u0440\u0435\u0442\u044c\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430",hasAnswer:!1},{author:"char-1",replic:"\u0427\u0435\u0442\u0432\u0435\u0440\u0442\u0430\u044f \u0440\u0435\u043f\u043b\u0438\u043a\u0430",hasAnswer:!1}]}},p=r.a.createContext(),h=p.Provider,d=p.Consumer,g=n(14),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DIALOG":return{currentDialog:t.payload};default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0).type,e},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ROOM":return t.payload;default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&arguments[1];return e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&arguments[1];return e},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&arguments[1];return e},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];return e},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{time:"00:00",Date:"1 \u044f\u043d\u0432\u0430\u0440\u044f 2019"};arguments.length>1&&arguments[1];return e},_=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_LOADED":return t.payload;default:return e}},A=function(){return Object(g.b)({currentDialog:v,roomsList:f,currentRoom:b,inventory:E,messages:O,gameRoutes:j,settings:y,userData:w,loadGame:_})},N=function(e){return Object(g.c)(A(),e||{})},k=n(2),C=n(4),R=n(3),x=n(5),D=n(13),G=function(e){var t=e.continueGame;return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page__button-list"},t,r.a.createElement(i.b,{className:"page__button",to:"/game/"},"\u041d\u043e\u0432\u0430\u044f \u0418\u0433\u0440\u0430"),r.a.createElement(i.b,{className:"page__button",to:"/settings"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(i.b,{className:"page__button",to:"/exit"},"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0438\u0433\u0440\u044b")))},L=(n(41),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={hasSavedGames:!1},n}return Object(x.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.state.hasSavedGames?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.b,{className:"page__button",to:"/game/"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0438\u0433\u0440\u0443"),r.a.createElement(i.b,{className:"page__button",to:"/save-load"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0433\u0440\u0443")):null;return r.a.createElement(G,{continueGame:e})}}]),t}(a.Component)),S=function(e){function t(){return Object(u.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"game-settings page"},r.a.createElement("div",{className:"page__popup"},"Game Settings. \u0442\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0444\u043e\u0440\u043c\u0430 \u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438"))}}]),t}(a.Component),I=function(e){function t(){return Object(u.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"save-load page"},r.a.createElement("div",{className:"page__popup"},"Save Load. \u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u043c\u0438 \u0438\u0433\u0440\u0430\u043c\u0438, \u0444\u043e\u0440\u043c\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f/\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f."))}}]),t}(a.Component),P=(n(42),function(e,t){return function(n){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(C.a)(this,(e=Object(R.a)(a)).call.apply(e,[this].concat(r)))).state={background:[],interactions:[],things:[],links:[]},t}return Object(x.a)(a,n),Object(k.a)(a,[{key:"componentDidMount",value:function(){var e=this;t&&t().then(function(t){e.setState({background:t.background,interactions:t.interactions,things:t.things,links:t.links})})}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,this.state))}}]),a}(a.Component)}),T=function(e){return function(t){return r.a.createElement(d,null,function(n){return r.a.createElement(e,Object.assign({},t,{gameService:n}))})}},M=function(e){var t=e.currentReplic,n=e.goToNextReplic,a=t.author,c=t.replic;return r.a.createElement("div",{className:"dialog-window__container",onClick:n},r.a.createElement("div",{className:"dialog-window__overlay"}),r.a.createElement("div",{className:"dialog-window__author"},a),r.a.createElement("div",{className:"dialog-window__text"},c))},H=function(e){var t=e.answerList,n=e.onAnswerClick;return r.a.createElement("div",{className:"dialog-window__answer-list"},t.map(function(e){return r.a.createElement("button",{className:"dialog-window__answer",onClick:function(){return n(e.goto)},key:e.key},e.text)}))},J=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={replicsArr:[],currentReplicIndex:0},n.onAnswer=function(e){n.setState({currentReplicIndex:e})},n.onGoToPrevReplic=function(){var e=n.state.currentReplicIndex;e>0?n.setState({currentReplicIndex:e-1}):n.setState({currentReplicIndex:0})},n.onGoToNextReplic=function(){var e=n.state,t=e.replicsArr,a=e.currentReplicIndex;a<t.length-1?n.setState({currentReplicIndex:a+1}):n.setState({currentReplicIndex:-1})},n.onEndDialog=function(){},n}return Object(x.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.gameService.getDialog();this.setState({replicsArr:e}),this.props.dialogLoaded(e)}},{key:"render",value:function(){var e=this.state,t=e.currentReplicIndex,n=e.replicsArr;if(0===n.length||-1===t)return!1;var a=n[t],c=a.hasAnswer,o=a.answerList,i=void 0===o?[]:o,l=c?r.a.createElement(H,{answerList:i,onAnswerClick:this.onAnswer}):null,s=l?null:r.a.createElement(M,{currentReplic:n[t],goToNextReplic:this.onGoToNextReplic});return r.a.createElement("div",{className:"dialog-window"},l,s)}}]),t}(a.Component),W=T(Object(l.b)(function(e){return{replicsArr:e.replicsArr}},function(e){return{dialogLoaded:function(t){e({type:"LOAD_DIALOG",payload:t})}}})(J)),B=(n(43),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={loadPercent:0},n.onChangePersent=function(e){n.setState({loadPercent:e})},n}return Object(x.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.onChangePersent(10)},500),setTimeout(function(){e.onChangePersent(40)},1e3),setTimeout(function(){e.onChangePersent(80)},3e3),setTimeout(function(){e.onChangePersent(100)},5e3),setTimeout(function(){e.props.gameLoading(!1)},6500)}},{key:"render",value:function(){var e=this.state.loadPercent;return r.a.createElement("div",{className:"game-loader page"},r.a.createElement("div",{className:"game-loader__line"},r.a.createElement("div",{className:"game-loader__line-filler",style:{width:"".concat(e,"%")}})))}}]),t}(a.Component)),F=Object(l.b)(null,function(e){return{gameLoading:function(t){e({type:"GAME_LOADED",payload:t})}}})(B),q=(n(44),P(function(){return r.a.createElement("div",{className:"home room"},'\u041a\u043e\u043c\u043d\u0430\u0442\u0430 "Home"',r.a.createElement(i.b,{to:"2"},"\u041d\u0430 \u0443\u043b\u0438\u0446\u0443"))})),z=P(function(){return r.a.createElement("div",{className:"home room"},'\u041a\u043e\u043c\u043d\u0430\u0442\u0430 "City"',r.a.createElement(i.b,{to:"1"},"\u0414\u043e\u043c\u043e\u0439"))}),K=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={currentRoom:n.props.match.params.id,loadGame:!1},n}return Object(x.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){this.props.gameLoading(!0)}},{key:"componentWillReceiveProps",value:function(e){this.state.currentRoom!==e.match.params.id&&(this.setState({currentRoom:Number(e.match.params.id)}),this.props.roomChanged(Number(e.match.params.id))),this.setState({loadGame:e.loadGame})}},{key:"render",value:function(){var e=this.state,t=e.currentRoom,n=e.loadGame?r.a.createElement(F,null):null;return r.a.createElement("div",{className:"game-page"},n,r.a.createElement("div",{className:"game-page__popup"},r.a.createElement("h1",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0438\u0433\u0440\u044b."),r.a.createElement("p",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0430, \u043a\u043e\u043c\u043d\u0430\u0442\u044b \u0438 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432\u043e\u0435 \u043e\u043a\u043d\u043e"),r.a.createElement("p",null,"\u0422\u0435\u043a\u0443\u0449\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430 ",t)),r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/game/1",component:q}),r.a.createElement(D.a,{path:"/game/2",component:z}),r.a.createElement(D.a,{component:q})),r.a.createElement(W,null))}}]),t}(a.Component),Q=Object(l.b)(function(e){return{loadGame:e.loadGame}},function(e){return{roomChanged:function(t){e({type:"CHANGE_ROOM",payload:t})},gameLoading:function(t){e({type:"GAME_LOADED",payload:t})}}})(K),U=function(e){function t(){return Object(u.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/",component:L,exact:!0}),r.a.createElement(D.a,{path:"/game/",component:Q,exact:!0}),r.a.createElement(D.a,{path:"/settings/",component:S,exact:!0}),r.a.createElement(D.a,{path:"/save-load/",component:I,exact:!0}),r.a.createElement(D.a,{path:"/new-game/",component:Q,exact:!0}),r.a.createElement(D.a,{path:"/game/:id?",render:function(e){var t=e.match;return r.a.createElement(Q,{match:t})}})))}}]),t}(a.Component),V=(n(45),function(e){function t(){return Object(u.a)(this,t),Object(C.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"error-indicator"},"\u041e\u0448\u0438\u0431\u043a\u0430")}}]),t}(a.Component)),X=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(C.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},n}return Object(x.a)(t,e),Object(k.a)(t,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(V,null):this.props.children}}]),t}(a.Component),Y=(n(46),N(s));window.store=Y;var Z=new m;o.a.render(r.a.createElement(l.a,{store:Y},r.a.createElement(X,null,r.a.createElement(h,{value:Z},r.a.createElement(i.a,null,r.a.createElement(U,null))))),document.getElementById("root"))}},[[27,1,2]]]);